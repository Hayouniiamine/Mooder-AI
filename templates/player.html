<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mooder AI - Music Player</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/player.css') }}">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://open.spotify.com https://embed.spotify.com https://embed-cdn.spotifycdn.com; 
                   script-src 'self' https://open.spotify.com; 
                   style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net; 
                   font-src 'self' https://cdn.jsdelivr.net; 
                   frame-src https://open.spotify.com;">
</head>

<body>
    <video autoplay muted loop id="background-video">
        <source src="{{ url_for('static', filename='img/vid.mp4') }}" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    <header class="header">
        <div class="profile-container">
            <a href="{{ url_for('account') }}">
                <img src="{{ url_for('static', filename='img/avatar.jpg') }}" alt="Profile Avatar" class="profile-avatar">
            </a>
        </div>
        <h2>Welcome, <span id="username">{{ current_user.username }}</span>!</h2>
    </header>
    
    <div class="player-wrapper">
        <h1 class="title">🎶 Enjoy Your Mood-Based Music 🎶</h1>

        <div class="player-container">
            <!-- Spotify Player -->
            <div class="music-player" id="music-player">
                {% if playlist_id %}
                <iframe src="https://open.spotify.com/embed/playlist/{{ playlist_id }}" width="100%" height="380"
                    frameborder="0" allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture">
                </iframe>
                {% else %}
                <p>Error loading music player. Please try again.</p>
                {% endif %}
            </div>
        </div>

        <!-- Mood Box -->
        <div class="mood-box">
            {% if mood == 'happy' %}
            <div class="mood-content happy">
                <h2>😊 Happy Mood</h2>
                <p>"Happiness is not something ready-made. It comes from your own actions." – Dalai Lama</p>
                <p>"The only joy in the world is to begin." – Cecil B. DeMille</p>
                <p>"Happiness is a warm puppy." – Charles M. Schulz</p>
                <p>"The purpose of life is not to be happy. It is to be useful, to be honorable, to be compassionate." – Ralph Waldo Emerson</p>
                <p>🎧 Upbeat music increases dopamine levels by 9%!</p>
            </div>
            {% elif mood == 'sad' %}
            <div class="mood-content sad">
                <h2>😢 Sad Mood</h2>
                <p>"Tears come from the heart and not from the brain." – Da Vinci</p>
                <p>"Sadness is but a wall between two gardens." – Kahlil Gibran</p>
                <p>"It’s okay to not be okay." – Unknown</p>
                <p>"The only way to get through sadness is to feel it." – Unknown</p>
                <p>🎵 Melancholic music can help boost mood over time.</p>
            </div>
            {% elif mood == 'angry' %}
            <div class="mood-content angry">
                <h2>😡 Angry Mood</h2>
                <p>"For every minute you are angry, you lose sixty seconds of happiness." – Emerson</p>
                <p>"Anger is one letter short of danger." – Eleanor Roosevelt</p>
                <p>"Speak when you are angry and you will make the best speech you will ever regret." – Ambrose Bierce</p>
                <p>"You will not be punished for your anger, you will be punished by your anger." – Buddha</p>
                <p>🤘 Rock music can help release frustration!</p>
            </div>
            {% elif mood == 'neutral' %}
            <div class="mood-content neutral">
                <h2>😐 Neutral Mood</h2>
                <p>"Stay calm and trust the flow of life." – Unknown</p>
                <p>"Peace is not the absence of conflict, but the ability to cope with it." – Mahatma Gandhi</p>
                <p>"Calmness is the cradle of power." – Josiah Gilbert Holland</p>
                <p>"The only way to find true happiness is to risk being completely cut open." – Chuck Palahniuk</p>
                <p>🎼 Lo-fi beats help with focus and relaxation.</p>
            </div>
            {% endif %}
        </div>

        <!-- Playlist Info -->

    </div>

    <footer class="footer">
        <div class="footer-container">
            <div class="about">
                <h3>About Mooder AI</h3>
                <p>
                    Mooder AI is an intelligent music player that adapts to your emotions. Using facial recognition
                    technology, it detects your mood and plays music that fits your feelings. Experience a seamless
                    connection between emotions and melodies!
                </p>
            </div>
            <div class="social-media">
                <h3>Follow Us</h3>
                <div class="social-icons">
                    <a href="https://www.facebook.com" target="_blank"><i class="bi bi-facebook"></i></a>
                    <a href="https://www.twitter.com" target="_blank"><i class="bi bi-twitter"></i></a>
                    <a href="https://www.instagram.com" target="_blank"><i class="bi bi-instagram"></i></a>
                    <a href="https://www.linkedin.com" target="_blank"><i class="bi bi-linkedin"></i></a>
                </div>
            </div>
        </div>
        <p class="copyright">&copy; 2025 Mooder AI. All rights reserved.</p>
    </footer>
</body>

</html>
